モーションブラーエフェクト Ver.3.0
制作：そぼろ


読み込むだけで使えるモーションブラーです。
Ver.3より、静画でも使えるようになりました。

Ver.2.x系よりも品質重視のため、非常に重いです。
動画用ならVer.2.2で十分な場合が多いです。

静画用メインで調整しています。
モデル単体よりも、無地でもなんらかの背景モデルがあったほうが望ましいです。
白背景と黒背景を同梱しています。



■必要環境

MME Ver.0.27 以降
または MMM Ver.1.1.9.9

SM3.0 + VTF + 浮動小数点テクスチャをサポートするグラフィックボード


■使い方

・MotionBlur.xを読み込みます
・Siでブラー強度調整

画面が静止しているときは何も変わりませんが、
グリグリ動かしてみてください。


■静画対応

同梱の LockMotion.x が読み込まれ、かつ表示されている間はモーション状態の記録が停止し、
その直前のモーション状態からの移動量によってブラーがかかるようになります。

代表的な使い方として、以下のようなものが考えられます。

・適当にモーションを付ける
・LockMotion.xを読み込み
・0FでLockMotion.xを非表示にしキー登録
・静画出力したいフレームでLockMotion.xを表示しキー登録
・フレームを少し戻す
・静画出力したいフレームに再度移動する
・ブラーがかかった状態で止まる


LockCamera.x は、カメラ移動によるブラーについて同様の機能を持ちます。



■MMM対応

Ver.2.2よりMMM対応しました。
動作確認はVer.1.1.9.9で行っています。
ただし、アクセサリの移動にブラーがかからない制限があります。


■注意事項

以下の要素には正しくブラーがかかりません。ご了承ください。
・半透明素材の向こう側に透けて見える部分
・エフェクトで移動、変形、増殖を行ったオブジェクト（パーティクル系含む）
・背景AVIに写っているもの

MMEを切ったり、他のエフェクトを併用すると変な板が大量に現れることがありますが、
邪魔ならY移動などで隠すようにしてください。
ダミーアクセサリを置き換えることはしないでください。

頂点数26万を超えるPMXファイルについては非対応です。

他のポストエフェクトと併用するとき、描画順序により上手くブラーがかからない場合があるので
おかしいなと感じたら描画順序を入れ替えてみてください。


■更新履歴


Ver.3.0
・静画対応
・クオリティ向上
・Siの使い方を変更

Ver.2.2
・MMM対応
・ジャギー低減
・バグ修正

Ver.2.1
・ラインブラーに関する深刻なバグ修正

Ver.2.0
・残像の描画方法を変更

Ver.1.6
・26万頂点まで対応
・特定の環境で動作しない不具合解消

Ver.1.5
・VelocityMapAccessoryとVelocityMapPMDを統合
・デフォルトのブラー強度を少し弱く
・品質改善
・ダミーアクセサリを透明に

Ver.1.4
・モデルを非表示→表示としたときにブラーがかからないように

Ver.1.3
・モデルと背景が逆方向に動いているときの境界面を低減
・背景色の任意指定

Ver.1.2
・RADEON系グラボで正常に動作しなくなるバグ修正

Ver.1.1
・激しくカメラを動かしたときに画面が汚くなる問題修正

Ver.1.0
・正式公開


■ユーザーパラメータ

・DirectionalBlurStrength
ぼかし強度です。大きくするとブラーが強くなります。

・LineBlurLength
残像がどれだけ伸びるか指定します。

・LineBlurStrength
残像の濃さを指定します。

・DirectionalBlurLimit
像の破綻を防ぐために速度にリミッタをかけます。

・VelocityUnderCut
これより速度の遅い部分にはブラーがかかりません。
ゆっくり移動する部分のにじみ対策です。

・SceneChangeThreshold
・SceneChangeAngleThreshold
カメラ移動とシーン切り替えを区別するための閾値を設定します。
この数値より大きくカメラが動いたときはシーン切り替えと判断し、ブラーを無効にします。
前者は距離、後者は角度の判定に使用されます。

・BackColor
背景色を指定します。デフォルトは透明黒です（動画のアルファ合成が最もやりやすいため）。

・LINEBLUR_QUAD
ラインブラーの解像度を縦横2倍の4倍にするオプションです。
1で有効、0で無効です。重すぎるときは0にしてください。

・SAMP_NUM
ぼかしのサンプリング数です。大きくするとぼかしの品質が上がりますが重くなります。


■免責

改造、再配布、商用利用を含むいかなる利用も自由です。
作者の許諾も不要です。
ただし、その結果について作者は責任を負いかねます。
利用は自己責任でお願いします。


