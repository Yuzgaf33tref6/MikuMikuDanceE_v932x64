

ikWetFloor


■ 概要

ikWetFloorは、針金PのWorkingFloorXを改造してポストエフェクトに置き換えたものです。
視線方向に対して映り込みを引き伸ばすことで、濡れた地面のような効果が出せます。

なお、WorkingFloorXのXシャドウ機能はありません。


■ 使用方法

1. MMDにikWetFloor.xを放り込む。


■ 設定

アクセサリのY座標が映り込む基準の高さになります。必要に応じて変更してください。

アクセサリのTr値で映り込みの強さを変更できます。

その他の設定は、ikWetFloorSettings.fxsubを編集することで変更できます。
主な設定項目は、映り込みの歪みに関するものです。


ikWetFloorSettings.fxsub 内の MaterialTextureName
	このテクスチャで映り込み度合いと映りこむ色、滑らかさを調整できます。

	映り込み度合い、映りこむ色： 
	RGBチャンネルで指定できます。色が明るいほど映りこみます。

	赤だけを明るくし緑と青を暗くすると、赤い色だけが映り込みます。
	映りこむはずの緑や青の成分が赤くなるわけではないので、
	青い光しかない場面では何も映りこまなくなります。

	滑らかさ：
		α値が高いほど設定したザラ付き度を反映し、α値が低いほど滑らかになります。
		もともとのザラ付き度が低い場合は差があまりつきません。

	テクスチャはアクセサリのXZ位置とサイズを基準に適用されます。
	位置の変更は、操作画面の右下にある、Glocal/Local/AccessoryをAccessoryに変えて、
	X,Zの平行移動で動かせば多少は調整が楽になります。

	既知の不具合：
		隣接する領域が異なる材質の場合、境界部分がボケて見える場合があります。
		材質指定用テクスチャの解像度が低い場合は、
		解像度を高くすることで軽減できる場合があります。
		エフェクト自体にボカす機構があるため、こちらが理由で発生している場合は、
		回避できません。


ikWetFloorSettings.fxsub 内の FloorDarkenRate
	床の映り込み度合いに応じて、床自身の色を暗くします。


■ MMEのエフェクトタブについて

FloorHeightRT
	どこに、どれだけ映り込みをさせるかの情報を作成する。

	表示をはずすと存在しないものとして扱われる。
	対象例：スポットライトの光など、実体が存在しない半透明のポリゴン。

	ここに ikFloorHeight_マスク.fxsub を指定すると、映り込み対象外となる。
	対象例：映り込みをさせたくないキャラのモデル。
	対象例：映り込む床の上にある、映り込まないカーペット。


WetFloorRT
	床に映り込むものを作成する。
	AutoLuminousに対応するための加工などをここで行っている。

	ここで表示対象外にすると映り込みには現れない。
	対象例：ドラキュラなどのように、床に映り込まないもの。

	Mainタブでは表示オフにし、WetFloorRTでのみ表示オンにすることで、
	映り込みの中にだけモデルを表示させることができる。
	(物理計算の干渉で問題がでそう)



■ 使用、再配布に関して

エフェクトの利用、改造などについては自由に行ってもらってかまいません、連絡も不要です。

このエフェクトを使用したことによって起きたすべての損害等について、作者及び関係者は一切責任を負わないものとします。


■ 更新履歴

2015/07/17 Ver 0.04	マスクされたモデルにも映り込みが滲む問題に対処。他。
2015/01/29 Ver 0.03	床が明るくなり過ぎるのに対処
2014/12/21 Ver 0.02	テクスチャによる材質対応
2014/12/17 Ver 0.01	初公開


ikeno
twitter: @ikeno_mmd

