
ikRaindrops

■ 概要

	このドキュメントは、MikuMikuEffect用エフェクト「ikRaindrops」の使い方を説明するものです。
	ikRaindropsは、窓についた雨粒を表現するためのエフェクトです。
	簡易版のため、ところどころ不自然な部分があります(後述)。


■ 使用方法

	MMDのアクセサリに、"ikRaindrops.x"を追加してください。

	雨粒をつけたい窓付近にアクセサリを配置してください。
	アクセサリの"影"にチェックをつけることで、雨粒のつく範囲が青い半透明のパネルとして可視化されます。
	(アクセサリの"影"をon/offすると、雨の状態がリセットされます。)

	アクセサリのTrで雨の量をコントロールできます。
	0で無し、1で100%になります。ただし、0にしても即座に雨粒が消えません。

	透明エフェクトであること。環境マップをレンダリングしていることから、アクセサリの表示順番によって、見た目がおかしくなる可能性があります。
		水滴に写り込む必要のないモデルを、MMEのRefractRTタブから除外することで、見た目がよくなる場合があります。
		相性の悪いエフェクトから、ikRaindrops.xを除外することで、見た目が改善される場合があります。


■ エフェクトファイル内で設定できる項目

	ParticleSize
		水滴の大きさ。アクセサリのSiを弄っても雨粒の大きさは変わりません。

	LifetimeMin
		水滴が落下するまでの最小時間(秒)
	LifetimeFluctuation
		水滴が落下するまでの揺れ幅(秒)

		出現から、LifetimeMin 〜 LifetimeMin + LifetimeFluctuation の間に雨粒は落下します。

	DropSpeedRate
		水滴の落下速度

	NumRaindropInTextureW
	NumRaindropInTextureH
		テクスチャ上に何個の雨粒パターンがあるか? 自分で雨粒パターンを弄りたい人向け。

	STOP_IN_EDITMODE
		編集モードで雨を止めるかどうか。

	RESET_AT_START
		0フレーム再生時に雨をクリアするかどうか。


■ 制限

	・雨が重なると見た目が不自然になります。
	・通常、雨粒が重なると融合しますが、お互いに干渉することはありません。
	・雨粒の流れる跡が直線状になっています。
	・窓ガラスの内側から外を見た場合しか表現できません。


■ 雨粒テクスチャについての注意

	法線マップのアルファチャンネルがマスクになっています。


■ 使用、再配布に関して

	エフェクトの利用、改造、再配布などについては自由に行ってもらってかまいません、連絡も不要です。

	このエフェクトを使用したことによって起きたすべての損害等について、作者及び関係者は一切責任を負わないものとします。


■ 更新履歴

	2014/09/26 Ver.0.02		通常版公開に合わせて修正。
							環境マップ描画用のエフェクトファイルを(none)に変更した。
							ハイライトの計算がおかしかったので修正。
								→ 明るくなり過ぎる場合は、新設のスペキュラ用パラメータで調整してください。お手数をおかけします。
							通常版で追加したパラメータの一部を簡易版にも移植。

	2014/09/22 Ver.0.01		初公開

ikeno
