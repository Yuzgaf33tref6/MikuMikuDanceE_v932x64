
ikSunshaft


■ 概要

　ゴッドレイとは別の手法で光の筋を描くエフェクト。
　シャドウマップ用の情報を流用して、画面外にある遮蔽物の影響を受ける。
　精度が悪い。


■ 使用方法

　1.MMDのアクセサリに、"ikSunshaft.x"を追加する。
　2.アクセサリの表示順序で、背景などのアクセサリ類よりあとに表示されるようにする。
　3.アクセサリの影表示を有効にする。
　(4.コントローラ(ikSunshaft_Ctrl.pmx)を入れて、モーフで設定を行う。)

　※ 表示 > 地面影表示をオフにしないとエフェクトが表示されない場合があります。
　※ 光を遮る側のオブジェクトの影表示が有効でないと、光を遮りません。
　　逆に、影表示対象外にすると光を遮らなくなります。
　※ デフォルトの設定ではライト色を使うようになっています。ライト色が黒だと何も表示されません。

　MMEのタブにある、「LinearDepthMapRT」は、このエフェクトが、カメラから画面奥のどこまでを調査対象とするべきか？を得るためのものです。不要なオブジェクトは描画対象からはずしてもかまいません。


■ パラメータの詳細

□ アクセサリ上から設定できるパラメータ

　Si: ライト強度。
　　0〜10程度。大き過ぎると白飛びする場合があります。
　　0:無効、1: 標準的な強度。

　Tr: エフェクト全体の効果
　　0:無効、1:100%有効

□ コントローラで設定するパラメータ

　※ 基本的にはデフォルト値 = 0になるように設計したため、
　　 同じ"強度"でも、0が最大の場合と、1が最大の場合があります。

　カスタムライト色
　　MMDのライト色とは別の色を使いたい場合1にする。
　ライト色R,G,B
　　カスタムライト色の設定

　ライト強度
　　0で最大、1でライト無効。(アクセのSi x ライト強度)でライトの強さが決まる。

　指向性
　　ライトとカメラ方向に応じて光の強さを変化させるか。
　　0で有効、1で無効。

　カラーシフト
　　1にすると、ライトの向きから外れるほど青くなる。


　フォグ色R,G,B
　　そのまま
　フォグ強度
　　深度フォグの強さ。0で無効、1で有効。ライト強度と逆な点に注意。
　フォグ濃度+/-
　　距離とフォグの濃さを調整する。
　　+よりにすると手前までフォグが濃くなり、-にすると遠方にだけフォグが掛かる。


　エフェクト強度
　　エフェクト全体の強さ。0で最大、1で無効。
　　(アクセのTr x エフェクト強度)でエフェクトの強さが決まる。


　テストモード
　　1で有効。エフェクトによって追加されるものだけが描画される。


□ エフェクトファイル上で直接操作するパラメータ

　MaxDiv
　　ピクセル毎に探索を行う回数。多いほど正確になるが重くなる。



■ 使用、再配布に関して

　エフェクトの利用、改造などについては自由に行ってもらってかまいません、連絡も不要です。
　このエフェクトを使用したことによって起きたすべての損害等について、作者及び関係者は一切責任を負わないものとします。


■ 更新履歴

　2016/02/09 Ver 0.05　　コントローラ対応
　2015/03/15 Ver 0.04　　影を強調するパラメータを追加。
　2014/11/28 Ver 0.03　　MMMの3ライト対応、MMD版の微調整。
　2014/11/27 Ver 0.02　　MMM仮対応
　2014/11/01 Ver 0.01　　初公開

ikeno
twitter: @ikeno_mmd
