Butterfly.fx ver0.0.3

蝶が群れて漂う様子のパーティクルエフェクトです．
Flocking.fxを元に作成しました．


・使用方法
(1)Butterfly.xを一つだけMMDにロードします．描画順序は出来るだけ後の方にしてください．
(2)Butterfly.fx先頭パラメータを必要に応じて適宜変更してください．
(3)0フレームを再生する．
(5)MMDのアクセサリパラメータで以下の変更が可能です．
    Y ：移動制限天井高さ(Butterfly.fxの先頭パラメータ＋この値が実際の指定高さになる)
    Si：水平移動制限範囲の拡大・縮小
    Tr：蝶パーティクルの透過度
    影：蝶及び背景のセルフシャドウ

・障害物回避について
蝶が他のモデルに貫通するのを避けるために障害物回避用エフェクトButterfly_Obstacle.fxを使用します．
(1)調整モデルButterfly_Obstacle.xをMMDにロードします．
   蝶が調整モデルの表面に近づき衝突の可能性がある場合は蝶が自動的に回避行動をとります．
(2)ロードした調整モデルを衝突回避させたいモデルのボーン(通常はセンターボーンでOK)に付け，アクセサリパラメータを
   調整して，ほどよくモデル全体をカバーします．
(3)蝶が正常に回避できる状態を確認したら，アクセサリパラメータをTr=0にして調整モデルを非表示にして使用します．


・その他の操作
(1)パラメータ変更によるFXファイル更新時は急激な加速度が掛かり，うまく表示されなくなることがあります．
   その場合，0フレームを再生するとデータが初期化されて再表示されるようになります．
(2)逆に0フレームを再生しない限り群れの配置は初期化されません．AVI出力時に任意の配置からスタートしたい場合は
   開始フレームを1にしてください.


・注意点
Butterfly.xを複数ロードするとファイル名を変えても正常に動作しなくなりますので注意してください．

※このFXファイルをMMEで使用するにはVTF(Vertex Texture Fetch)対応のSM3.0グラフィックボードが必須になります．
また、MMEver0.27以降でないと正しく動作しません．


・更新履歴
v0.0.3  2013/6/25   内部コードの整理、蝶テクスチャをパラメータで切り替えるようにした
                    MMDの照明操作の連動スイッチを追加
                    MikuMikuMoving版の追加
v0.0.2  2012/9/10   x64版の対応,障害物回避のバグ修正
v0.0.1  2011/10/7   初回版公開


・免責事項
ご利用・改変・二次配布は自由にやっていただいてかまいません。連絡も不要です。
ただしこれらの行為は全て自己責任でやってください。
このプログラム使用により、いかなる損害が生じた場合でも当方は一切の責任を負いません。


by 針金P
Twitter : @HariganeP


