ShadeFader.fx ver0.0.3

既存のシェーダ系エフェクトのON/OFFの切り替えで、エフェクトをかける前の状態と
かけた後の状態をスムーズに切り替えます。


・使用方法(モデルにシェーダ系エフェクトがすでに掛かっているとします)
(1)ShadeFader.xをMMDにロードします。MMMではShadeFader.fxを直接ロードします。
(2)対象となるモデルに以下のどちらかの方法でSF_Mask1.fxを適用する。

  ①MME GUIによる方法
    ｢MMEffect｣→｢エフェクト割当｣の[MaskShadeFaderRT]タブより適用したオブジェクトを選択して
    SF_Mask2.fxを解除して代わりにSF_Mask1.fxを割り当てる.

  ②ShadeFader.fxの先頭パラメータで指定する方法
    ShadeFader.fxの先頭にある所定の箇所にモデルファイル名を記述。最大10体まで定義可能

(3)ShadeFader.xの描画順序は必ず適用したモデルの後になるように設定してください。
(4)MMDのアクセサリパラメータで以下の変更を行いキーフレーム登録してください。
    Si：(0～1)エフェクトの掛かり具合をマスク画像に応じて決定(Tr<1.0の状態で使用します,Tr=1.0でマスクフェードのみで切り替え出来ます)
    Tr：エフェクトの掛かり度，0でシェーダ系エフェクト無し状態
(5)必要に応じてShadeFader.fxの先頭パラメータでマスクファイル名，フェードの閾値を指定してください。
   マスク画像を変更することで多用なフェード切り替えが可能になります.
   マスク画像は吉里吉里のトランジションライブラリ等が使いやすいです.
   http://kikyou.info/tvp/


・応用
｢MMEffect｣→｢エフェクト割当｣の[ShadeFaderRT]タブより適用したオブジェクトを選択して
別のシェーダ系エフェクトを適用すると2つのシェーダ系エフェクト間の切り替えになります。


・注意点
このfxファイルはモデルにエフェクトをかける前の状態を一旦オフスクリーンバッファに記録しておき、
これをモデルにエフェクト適用後に上書きすることでエフェクトのON/OFFを切り替えています.
したがって、モデルの半透明で背景が透けて見える箇所は正しくエフェクトOFF状態にはなりません.
また元の頂点座標を大きく変更するようなエフェクトも正しくエフェクトOFF状態にできません.


・更新履歴
v0.0.5  2013/7/04   先頭パラメータによるモデル設定方法の簡素化、内部コードの整理
                    MikuMikuMovingの対応
v0.0.2  2012/9/10   x64版の対応
v0.0.1  2011/9/27   初回版は非公開


・免責事項
ご利用・改変・二次配布は自由にやっていただいてかまいません。連絡も不要です。
ただしこれらの行為は全て自己責任でやってください。
このプログラム使用により、いかなる損害が生じた場合でも当方は一切の責任を負いません。


by 針金P
Twitter : @HariganeP


