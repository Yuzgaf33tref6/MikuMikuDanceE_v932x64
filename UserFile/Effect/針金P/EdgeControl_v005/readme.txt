EdgeControl.fx ver0.0.5
EdgeControl_MMM.fxm ver0.0.5

エッジ描画をMMD標準のを用いずに，シェーダによる独自描画を行います。
エッジの太さを頂点とカメラ位置との距離で決めているので，配置やカメラアング，巨大モデルで
エッジが太くなりすぎる弊害を回避することが出来ます。
また，アクセサリに対してもエッジを付けることが出来ます。


・使用方法
[MMD･MME版の場合]
(1)PMD,PMX,またはアクセサリにEdgeControl.fxを適用してください。
    GUIの場合｢MMEffect｣→｢エフェクト割当｣のメインタブより適用したいオブジェクトにEdgeControl.fxを割り当てる.
    ファイル名設定の場合：XXXXX.pmd から XXXXX[EdgeControl.fx].pmd に変更，または EdgeControl.fx を XXXXX.fx に変更してロード。
(2)EdgeControl.fxの先頭パラメータを適宜変更してください。
(3)EdgeController.pmdをMMDにロードします。
(4)モデル描画順序で適用したオブジェクトの直前にEdgeController.pmdを置く。
(5)ColorControl.pmdの表情スライダのそれぞれの項目で以下の制御が可能です。
    目  ：色制御ON → スライダ左側はOFFでMMD標準のエッジ色になり，右側でコントローラ指定になります。
    ﾘｯﾌﾟ：エッジ赤,エッジ緑,エッジ青 → エッジ色をRGBで指定します。
    まゆ：エッジ細 → エッジを細くします。
    その他：エッジ太 → エッジを太くします。

[MikuMikuMoving版の場合]
(1)EdgeControl_MMM.fxmをMMMにロードしてください。
(2)MMMメニューの｢ファイル｣→｢エフェクト割当｣より適用したいモデルを選択して、EdgeControl_MMMを割り当てる.
(3)必要に応じてEdgeControl_MMM.fxmの先頭パラメータを適宜変更してください。
(4)MMMのエフェクトプロパティに追加したUIコントロールよりパラメータ変更が可能です。


・注意点
MMD標準のエッジ色で描画する場合は一度エッジが描画された状態(PMD･PMXモデルがあってボーン選択でない状態)にしないと
正常に表示されません。またアクセサリに対してエッジを付けられるのは色制御ONの時のみです。

デフォルトでは全ての頂点に対してエッジ描画するようになっています。
PMDの材質でエッジoff設定にしているところまでエッジを描くので，モデルによっては特に表情などの
雰囲気が変わる可能性があります。そのためモデルごとにエッジ描画の材質指定をする必要があります。

PMDEditorでエッジを描画している材質を確認してからEdgeControl.fxの先頭パラメータで描画する材質を指定してください。
材質指定方法は以下のように記述します。<MMEffectのREFERENCE.txtより抜粋>
　　"0,3,5"のように、カンマ区切りで番号を列挙することで、複数の番号を指定できる。
　　また、"6-10"などのように、番号をハイフンでつなぐことで、範囲指定ができる。
　　"12-"のように、範囲の開始番号のみを指定した場合は、それ以降の全ての番号が対象となる。

例  あにまさ式 標準ミクv1.3
#define EDGE_ON   "0-4"   // エッジを描画する材質番号

例 Lat式ミクVer2.3_Normal.pmd
#define EDGE_ON   "1,3-5,7-11,13,24,27"   // エッジを描画する材質番号


・更新履歴
v0.0.5  2013/07/02   MMD・MME verUpに伴うエラーの対応
                     MikuMikuMoving版の追加
v0.0.4  2012/09/10   EDGECOLOR取得用のダミー処理追加、パースペクティブon/offでエッジ太さ調整法を変更
v0.0.3  2011/02/05   PMDコントロールモデルの追加，コントロールモデルの表情スライダで制御可に，エッジ色をMMD操作で変更可に
v0.0.2  2010/11/22   視野角変化によるエッジ太さの再調整
v0.0.1  2010/11/16   初回版公開


・免責事項
ご利用・改変・二次配布は自由にやっていただいてかまいません。連絡も不要です。
ただしこれらの行為は全て自己責任でやってください。
このプログラム使用により、いかなる損害が生じた場合でも当方は一切の責任を負いません。


by 針金P
Twitter : @HariganeP


