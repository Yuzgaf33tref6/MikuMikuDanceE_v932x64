MaskFade.fx ver0.0.4
MaskFadePmd.fx ver0.0.4

マスク画像を用いて多様なフェードイン・フェードアウトを行います.
フェードイン前・フェードアウト後は単色,テクスチャ画像,アニメテクスチャ,Screen.bmpのいずれかを表示します。
MaskFadePmd.fxはMaskFade.fxのPMD版です。
舞力介入P氏のlaughing_man.fxを改変して作成しました。


・MaskFade.fxの使用方法
(1)MaskFade.xをMMDにロードします。MMMではMaskFade.fxを直接ロードします。
(2)MaskFade.fxの先頭パラメータを適宜変更してください。
(3)MMDのアクセサリパラメータで以下の変更を行いキーフレーム登録してください。
    X,Y：テクスチャのスクロール表示をします。
    Z : テクスチャのスケール変更, +で拡大, -で縮小
    Rx,Ry,Rz：単色の場合のRGB色それぞれ(0〜1)，テクスチャ表示の場合は不要
    Si：(0〜1)値が小さいとフェードの変化がシャープで大きいとマイルドになります。
    Tr：(0〜1)フェードの進行度，0で完全透過，1で完全マスク，よってフェードインは1→0，フェードアウトは0→1
(4)描画順序によってフェードするオブジェクトとしないオブジェクトを分けることが出来ます。

・MaskFadePmd.fxの使用方法
(1)MaskFadePmd.pmdをMMDにロードします。MMMではMaskFadePmd.fxとMaskFadePmd.pmdを両方ロードしてエフェクト適用。
(2)MaskFadePmd.fxの先頭パラメータを適宜変更してください。(Screen.bmpは選択できません)
(3)MaskFadePmd.pmdのボーン,表情スライダで以下の変更を行いキーフレーム登録してください。
    ボーン：ｽｸﾛｰﾙ → XY移動でテクスチャのスクロール表示をします。
    表情スライダ
      目  ：拡大,縮小 → テクスチャの拡大･縮小を行います。単色の場合は不要
      ﾘｯﾌﾟ：単色赤,単色緑,単色青 → 単色の場合のRGB色を指定します。テクスチャ表示の場合は不要
      まゆ：閾値 → 値が小さいとフェードの変化がシャープで大きいとマイルドになります。
      その他：進行度 → フェードの進行度，0で完全透過，1で完全マスク，よってフェードインは1→0，フェードアウトは0→1
(4)描画順序によってフェードするオブジェクトとしないオブジェクトを分けることが出来ます。
   ただしMMDの仕様でPMD･PMXのエッジだけはフェードしても表示されたままになります。これを回避するには
   エッジの独自描画が必要になります。(EdgeControl.fx等を使用してください。)


・応用
オブジェクトの描画順序を，PMD→MaskFade.x→透過の無い背景アクセ の順にするとPMDのシルエット描画ができます。
マスク画像は吉里吉里のトランジションライブラリ等が使いやすいです.
http://kikyou.info/tvp/


・更新履歴
v0.0.4  2013/07/03   テクスチャのミップマップ対応
                     アクセ版をZでテクスチャのスケール変更追加
                     単色設定の不具合修正、内部コードの整理
v0.0.3  2012/09/10   x64版の対応
v0.0.2  2011/01/15   PMDコントロールモデルの追加，コントロールモデルのボーンと表情スライダで制御可に，
                     PMD内でフェードするモデルとしないモデルを分けられるように。
                     アニメGIF･APNG,Screen.bmpアニメも選択可に。
                     テクスチャの伸縮，スクロール追加，頂点シェーダの簡素化
v0.0.1  2010/10/27   初回版公開


・免責事項
ご利用はすべて自己責任でお願いします。


by 針金P


