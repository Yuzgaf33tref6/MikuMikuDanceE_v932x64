RayMMD 肌（体）用マテリアル　UV拡張キット　流れる汗用

流れる汗のようなものの作成手順

＜＜注意＞＞
これはモデル改造が必要な為、結構大変です。
モデル規約で改造が許可されているかどうか確かめて下さい。
適宜モデルデータのバックアップしながら進めて下さい。
　
最初に同封の使い方を読んで下さい。
【概要】
・これは、UVスクロールを半透明薄皮？（材質コピーでモデルの皮膚上に作成）をRayMMDの
　Custom設定でGlassにして、少し表現を水っぽく変えています。
　（今までは皮膚のNormalでそれらしくしていた）
・UV値にノイズを入れる事により水の流れをそれっぽくしています。
　またUVにノイズを入れるプラグイン同封しています。（UVnoise)
・薄皮作成時（材質複製時）に大量に複製モーフが出来た時用のお助けプラグインを同封しています。　　
　（MergeMorph)

【作成手順】
＊＊＊モデル改造＊＊＊
PMXエディタ　0.2.5.4を使用。

適用するモデルによって変わるかもしれませんが概略以下で出来ると思います。
【モデル変更】
（１）薄皮作成
　　・体で汗？水が流れる材質の複製して作成します。（例：体、顔　等）
　　　＊＊＊同封のMergeMorphの readme.txt を先に目を通しておく事をおすすめします＊＊＊
　　　Pmx編集の材質タブで目的の材質を選択
　　　右クリックー＞材質パーツの複製ー＞頂点/面/関連モーフを全て複製
　　　で、複製を行って下さい。
　　　ここで材質複製時に出来た複製モーフは元のモーフで制御出来た方が楽なので手動でマージするか、
　　　同封のMergeMorphを使ってみて下さい。
　 ・必要に応じて複数出来た材質を　材質の結合　を使って材質数を減らします。
　　（UVの方向を考慮して、新規材質で分け直す事も）

（２）（１）で作成した材質を半透明に設定します。
　　・拡散色　RGB all 0.8	非通過度A　0.05
         反射色　RGB all 0	反射強度　　5
         環境色　RGB all 0.5
　　・描画　両面描写（チェック）・・アルファを使う場合は両面の方がいい場合が多いけど
　　　　　　　　　　　　　　　　　　今回のような場合は意味ないかも・・・。
　　・エッジ　有効（チェック外す）
　　・テクスチャ関連
　　　全て空白（指定しない）     

（３）今回作成した材質をわずかに大きくする。
　　　これはやらなくても表示出来ますが、角度とか変わると表示がちらつく個々とがある為、
　　　やっておいた方がいいかもです。
　　　PMXViewで絞り込み選択（F3）で今回作成した材質のみチェックして表示する。
　　　全頂点を選択後、オブジェクト操作（F4）法線　法線軸　0.002　とかで法線
　　　方向にわずかに大きくしておきます。（出来るだけ小さい値の方がいいですが、
　　　モデルにより調整して下さい）

（４）今回作成した材質は材質のリストで出来るだけ最後の方にする。
　　　（複製した時点では最後に追加されているので通常そのままでOKのはずです。）

（５）今回作成した材質のUVにノイズを加える。
　　　UVをわずかに歪ませて、水玉がすこし不規則に動いているように
　　　見える効果を狙っています。
　　　これはモデルの元のUVに依存する為、必要に応じて行って下さい。

　　　作業方法です。
　　　PMXViewで絞り込み表示で今回作成した材質のみ表示させる。
　　　UVにノイズを加えたい頂点を選択する。（個別にノイズ量を変えたいという以外は
　　　全部選択して下さい）
　　　同封しているUVnoiseでUVにノイズを加える。（使い方はUVnoiseにあるreadmeを
　　　参照して下さい）

（５）PMXエディタのPMXデータの状態検証でエラーがない事を確認して下さい。


【RayMMD側設定】

今回は以下の水たまのnormal,alpha（mask) mapを使わせて頂いています。
以下のURLからデータをDLして下さい。
http://sakari.niittymaa.com/blog_drops-normal-map-and-mask

DLしたデータの解凍したものを
MaterialSkinSweet/map
以下にコピーして下さい。

後は、以前のMaterialとほぼ同じなので、先に”使い方”を読んで下さい。
違いは、Normal Subと同時にAlpha mapも同じだけオフセット＆LOOPSするようにしています。
（上記データではalpha map とnormal map のUVを同じだけスクロールする必要があるためです）
後、Alpha値のスケール設定が出るようにしました。
（RayMMDのAlpha値のスケールが出来るように改造済）

以下は設定方法です。がこれが絶対ではないので、参考にして下さい。
・最初に左上のモーフにあるAlphaを0.5とかにすると巨大な汗っぽいものが表示されると思います。
・次に大きさを変える為に右上にあるNoumalSubLoopsを大きくして汗の大きさを小さくしていきます。
　（スライダで右までいった場合は直接数値をいれて下さい）
・概略大きさとか決まったら、NormalSunScale+(-)、Alpha、Smoothnessをいじって
　よさそうな感じに設定します。(他も適宜変えてみて変化をみてみるのがいいかも）
　
　設定の例です。モデルやSkyBox(Dome)、その他ライティングで変わるので、参考程度にどうぞ。
　Alpha 			0.5
　NormalSubScale+		0.25		
   NormalSubLoops 		3.5
   NormalSubUvY		4.0(0f)  0.0(7000f)

以上です。

